(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bc06544"],{"01b6":function(t,e,a){"use strict";var r=a("3562"),n=a.n(r);n.a},1732:function(t,e,a){"use strict";var r=a("8c23"),n=a.n(r);n.a},"178e":function(t,e,a){"use strict";var r=a("b775"),n=a("4328"),s=a.n(n);function i(){return Object(r["a"])({url:"/setting/getAllSetting",method:"get"})}function o(t,e){return Object(r["a"])({url:"/setting/getSettingByKey",method:"post",data:{key:t,scope:e},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return t=s.a.stringify(t),t}]})}function l(t){return Object(r["a"])({url:"/setting/getSettingsByScope",method:"post",data:{scope:t},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return t=s.a.stringify(t),t}]})}function c(t,e){t.scope=e;var a=t;return Object(r["a"])({url:"/setting/updateSetting",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a,transformRequest:[function(t){return t=s.a.stringify(t),t}]})}e["a"]={getAllSetting:i,getSettingByKey:o,getSettingsByScope:l,updateSetting:c}},2895:function(t,e,a){},3562:function(t,e,a){},"555e":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.mapOptions.lat&&t.mapOptions.lng?a("naver-maps",{attrs:{height:t.height,initLayers:t.initLayers,mapOptions:t.mapOptions},on:{load:t.onLoad}},[a("map-info-window",{ref:"info-window",staticClass:"info-window",attrs:{isOpen:t.isOpen,marker:t.marker},on:{load:t.onWindowLoad}},[t.selectedOrder?a("div",{staticClass:"info-window-container"},[a("base-card",[a("div",[t._v(" "+t._s(t.selectedOrder.address.address)+" "+t._s(t.selectedOrder.address.detail)+" "),a("br"),t._v(" "+t._s(t.selectedOrder.address.phone)+" ")]),a("div",{staticStyle:{"margin-top":"8px"}},[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"}},[a("a",{attrs:{href:"nmap://search?appname=http://admin.cxy.novaborn.net&query="+t.selectedOrder.address.address}},[t._v("打开地图")])]),a("el-button",{attrs:{size:"mini",type:"primary"}},[a("a",{attrs:{href:"tel:"+t.selectedOrder.address.phone}},[t._v("拨打手机")])]),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.onFinishOrder(t.selectedOrder)}}},[t._v(" 完成订单 ")])],1)],1)])],1):t._e()]),a("map-marker",{attrs:{lat:t.mapOptions.lat,lng:t.mapOptions.lng},on:{click:t.onMarkerClicked,load:t.onMarkerLoaded}}),t._l(t.orderList,(function(e){return a("map-marker",{key:e.id,attrs:{icon:{content:"<div class='pin-number'>"+e.number+"</div><div class='pin "+e.orderState+"'></div><div class='pulse'></div>"},lat:e.address.y,lng:e.address.x,order:e},on:{click:t.onMarkerClicked,load:t.onMarkerLoaded}})})),t._l(t.distancePriceArr,(function(e){return a("naver-circle",{key:e.key,attrs:{lat:t.mapOptions.lat,lng:t.mapOptions.lng,radius:e.key}})}))],2):t._e()},n=[],s=(a("d81d"),a("a9e3"),a("2909")),i=a("5530"),o=a("5c96"),l=a("a145"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"content"},[t._t("default")],2)},d=[],u={name:"MapInfoWindow",props:{marker:Object,isOpen:Boolean},watch:{isOpen:function(t){t?this.infoWindow.open(this.map,this.marker):this.infoWindow.close(),this.$emit(t?"open":"close",this)}},data:function(){return{infoWindow:null,map:null}},methods:{open:function(t){this.infoWindow.open(this.map,t)},close:function(){this.infoWindow.close()}},mounted:function(){var t=this,e=function(e){console.log(e),t.map=e,t.infoWindow=new window.naver.maps.InfoWindow({content:t.$refs.content,borderWidth:0,backgroundColor:"transparent",disableAnchor:!0}),t.$emit("load",t)};window.$naverMapsLoaded?e(window.$naverMapsObject):window.$naverMapsCallback.push(e)},destroyed:function(){this.infoWindow.setMap(null)}},p=u,h=a("2877"),m=Object(h["a"])(p,c,d,!1,null,null,null),f=m.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default")],2)},v=[];a("4160");function b(t,e,a){naver.maps.Event.addListener(e,a,(function(e){return t.$emit(a,e)}))}function y(t,e,a,r){naver.maps.Event.addListener(e,a,(function(e){return t.$emit(a,{event:e,order:r})}))}var C={name:"MapMarker",props:{order:Object,otherOptions:Object,lat:{type:Number,required:!0},lng:{type:Number,required:!0},icon:Object},data:function(){return{marker:null,map:null}},watch:{lat:function(){this.setPosition({lng:this.lng,lat:this.lat})},lng:function(){this.setPosition({lng:this.lng,lat:this.lat})}},methods:{setClickable:function(t){return this.marker.setClickable(t),this},setCursor:function(t){return this.marker.setCursor(t),this},setDraggable:function(t){return this.marker.setDraggable(t),this},draw:function(){return this.marker.draw()},getAnimation:function(){return this.marker.getAnimation()},getClickable:function(){return this.marker.getClickable()},getCursor:function(){return this.marker.getCursor()},getDraggable:function(){return this.marker.getDraggable()},getDrawingRect:function(){return this.marker.getDrawingRect()},getIcon:function(){return this.marker.getIcon()},getOptions:function(t){return this.marker.getOptions(t)},getPosition:function(){return this.marker.getPosition()},getShape:function(){return this.marker.getShape()},getTitle:function(){return this.marker.getTitle()},getVisible:function(){return this.marker.getVisible()},getZIndex:function(){return this.marker.getZIndex()},onAdd:function(){return this.marker.onAdd()},onRemove:function(){return this.marker.onRemove()},setAnimation:function(t){return this.marker.setAnimation(naver.maps.Animation[t]),this},setIcon:function(t){return this.marker.setIcon(t),this},setOptions:function(t){return this.marker.setOptions(t),this},setPosition:function(t){return this.marker.setPosition(t),this},setShape:function(t){return this.marker.setShape(t),this},setTitle:function(t){return this.marker.setTitle(t),this},setVisible:function(t){return this.marker.setVisible(t),this},setZIndex:function(t){return this.marker.setZIndex(t),this}},mounted:function(){var t=this,e=function(e){t.map=e,t.marker=new window.naver.maps.Marker(Object.assign({position:new window.naver.maps.LatLng(t.lat,t.lng),map:e},t.otherOptions,t.icon?{icon:t.icon}:{}));var a=["mousedown","mouseup","dblclick","rightclick","mouseover","mouseout","mousemove","dragstart","drag","dragend","touchstart","touchmove","touchend","pinchstart","pinch","pinchend","tap","longtap","twofingertap","doubletap"];a.forEach((function(e){return b(t,t.marker,e)})),y(t,t.marker,"click",t.order),t.$emit("load",t)};window.$naverMapsLoaded?e(window.$naverMapsObject):window.$naverMapsCallback.push(e)},destroyed:function(){this.marker.setMap(null)}},_=C,w=Object(h["a"])(_,g,v,!1,null,null,null),O=w.exports,D=a("f8b7"),k=a("178e"),S=a("73f5"),x=a("2f62"),E={name:"NaverMap",components:{BaseCard:l["a"],MapInfoWindow:f,MapMarker:O},props:{height:{type:Number,default:1e3},allOrder:{type:Boolean,default:!1}},data:function(){return{selectedOrder:null,isOpen:!1,marker:null,map:null,mapOptions:{lat:null,lng:null,zoom:14,zoomControl:!0,zoomControlOptions:{position:"CENTER"},mapTypeControl:!0},distancePriceArr:[],initLayers:["BACKGROUND","BACKGROUND_DETAIL","POI_KOREAN","TRANSIT","CHINESE"],orderList:[],timer:null}},computed:Object(i["a"])({},Object(x["b"])(["userData"])),created:function(){var t=this;this.allOrder?this.getAllTodayOrderList():(this.getWaitEatOrderList(),this.timer=setInterval(this.getWaitEatOrderList,6e4)),S["a"].getStoreById(this.userData.storeId).then((function(e){t.mapOptions.lng=e.x,t.mapOptions.lat=e.y})),k["a"].getSettingByKey("distance_price_arr","DELIVERY").then((function(e){var a;e&&(a=t.distancePriceArr).push.apply(a,Object(s["a"])(JSON.parse(e.value)))})),k["a"].getSettingByKey("max_delivery_distance","DELIVERY").then((function(e){e&&t.distancePriceArr.push({key:parseFloat(e.value)})}))},methods:{onLoad:function(t){this.map=t},onWindowLoad:function(t){console.log(t),t.infoWindow.borderWidth=0},onMarkerClicked:function(t){console.log(this.$refs),t.order?this.selectedOrder=t.order:this.selectedOrder=null,this.marker!==t.event.overlay?(this.$refs["info-window"].close(),this.$refs["info-window"].open(t.event.overlay),this.marker=t.event.overlay,this.isOpen=!0):(this.marker=t.event.overlay,this.isOpen=!this.isOpen)},onMarkerLoaded:function(t){this.marker=t.marker},getWaitEatOrderList:function(){var t=this;D["a"].getTodayOrderListByState("WAIT_EAT").then((function(e){t.orderList=e}))},getAllTodayOrderList:function(){var t=this;D["a"].getTodayOrderList().then((function(e){t.orderList=e}))},onCopySuccess:function(){Object(o["Message"])({message:"复制成功",type:"success",duration:2e3})},onCopyError:function(){Object(o["Message"])({message:"复制失败",type:"error",duration:2e3})},onFinishOrder:function(t){var e=this;this.$confirm("确定当前订单已完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){D["a"].finishOrder(t.id).then((function(t){e.$message.success(t.message),e.isOpen=!1,e.allOrder?e.getAllTodayOrderList():e.getWaitEatOrderList()}))}))}},beforeDestroy:function(){clearInterval(this.timer)}},$=E,j=(a("8107"),Object(h["a"])($,r,n,!1,null,null,null));e["a"]=j.exports},"73f5":function(t,e,a){"use strict";var r=a("b775"),n=a("4328"),s=a.n(n);function i(t){return Object(r["a"])({url:"/store/getStoreById",method:"post",data:{storeId:t},transformRequest:[function(t){return t=s.a.stringify(t),t}]})}function o(){return Object(r["a"])({url:"/store/getStoreQRcode",method:"get"})}function l(t,e){var a=Object.assign({},t,e);return Object(r["a"])({url:"/store/getListByPage",method:"post",data:a,transformRequest:[function(t){return t=s.a.stringify(t),t}]})}function c(t){return Object(r["a"])({url:"/store/create",method:"post",data:t,transformRequest:[function(t){return t=s.a.stringify(t),t}]})}function d(t){return Object(r["a"])({url:"/store/update",method:"post",data:t,transformRequest:[function(t){return t=s.a.stringify(t),t}]})}e["a"]={getStoreById:i,getStoreQRcode:o,getListByPage:l,create:c,update:d}},"79e3":function(t,e,a){},8107:function(t,e,a){"use strict";var r=a("b8d2"),n=a.n(r);n.a},"8c23":function(t,e,a){},9406:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.currentRole,{tag:"component"})},n=[],s=(a("caad"),a("2532"),a("5530")),i=a("2f62"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[t.dashboardData?a("panel-group",{attrs:{dashboardData:t.dashboardData}}):t._e(),t.dashboardData?a("panel-group2",{attrs:{dashboardData:t.dashboardData}}):t._e(),a("base-card",{staticStyle:{margin:"20px 15px 0px 15px"}},[t.dashboardData?a("line-chart",{staticStyle:{"margin-top":"20px"},attrs:{dashboardData:t.dashboardData}}):t._e()],1),a("el-row",{staticStyle:{"margin-top":"30px",padding:"0 15px"},attrs:{gutter:30}},[a("el-col",{attrs:{lg:8,sm:24,xs:24}},[a("base-card",[t.dashboardData?a("pie-chart",{attrs:{dashboardData:t.dashboardData}}):t._e()],1)],1),a("el-col",{attrs:{lg:8,sm:24,xs:24}},[a("base-card",[t.dashboardData?a("bar-chart",{attrs:{dashboardData:t.dashboardData}}):t._e()],1)],1),a("el-col",{attrs:{lg:8,sm:24,xs:24}},[a("base-card",[a("order-naver-map",{attrs:{"all-order":!0,height:300}})],1)],1)],1)],1)},l=[],c=a("b775");function d(){return Object(c["a"])({url:"/getDashboardData",method:"get"})}var u={getDashboardData:d},p=a("a145"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"panel-group",attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,"WEIXIN_PAY")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"wechat-pay"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.wechatOrderAllPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 订单数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.wechatOrderAllCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,"ALI_PAY")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"alipay"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.alipayOrderAllPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 订单数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.alipayOrderAllCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,"TRANSFER")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"transfer"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.transferOrderAllPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 订单数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.transferOrderAllCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,"CREDIT_CARD")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"card"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.creditOrderAllPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 订单数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.creditOrderAllCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,"CASH")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"cash"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.cashOrderAllPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 订单数 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.cashOrderAllCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.onCardClick(null,null)}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"total"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总金额 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.allPrice,"start-val":0}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 总订单 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.allCount,"start-val":0}})],1)])])],1),a("simple-order-dialog",{ref:"simple-order-dialog"})],1)},m=[],f=a("ec1b"),g=a.n(f),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"simple-order-dialog",attrs:{"close-on-click-modal":!1,"lock-scroll":!1,"modal-append-to-body":!1,title:t.title,visible:t.dialogFormVisible,size:"mini",width:"800px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"正在加载中...","highlight-current-row":"",stripe:""},on:{"expand-change":t.getOrderDetail}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.detail.hasOwnProperty("address")?a("div",{staticClass:"order-expand"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.detail.orderItemList,"show-header":!1,stripe:""}},[a("el-table-column",{attrs:{prop:"goodsName"}}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[""!==e.row.goodsThumb?a("img",{staticStyle:{height:"30px",width:"auto"},attrs:{src:t.$VUE_APP_BASE_API+e.row.goodsThumb}}):t._e()]}}],null,!0)}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ₩ "+t._s(e.row.goodsPrice.toLocaleString())+" ")]}}],null,!0)}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" x "+t._s(e.row.goodsCount)+" ")]}}],null,!0)})],1),a("el-form",{staticClass:"order-expand-form",attrs:{"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单 ID"}},[a("span",[t._v(t._s(e.row.id))])]),a("el-form-item",{attrs:{label:"用户 ID"}},[a("span",[t._v(t._s(e.row.userId))])]),a("el-form-item",{attrs:{label:"总金额"}},[a("span",[t._v("₩ "+t._s(e.row.allPrice.toLocaleString()))])]),a("el-form-item",{attrs:{label:"优惠"}},[a("span",[t._v("₩ "+t._s(e.row.discountedPrices.toLocaleString()))]),""!=e.row.discount?a("span",[t._v("("+t._s(e.row.discount)+"折)")]):t._e()]),""!==e.row.ps?a("el-form-item",{attrs:{label:"备注"}},[a("span",[t._v(t._s(e.row.ps))])]):t._e()],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址"}},[a("div",[a("div",[t._v(t._s(e.row.detail.address.address))]),a("div",[t._v(t._s(e.row.detail.address.detail))])])]),a("el-form-item",{attrs:{label:"联系方式"}},[a("span",[t._v(t._s(e.row.detail.address.phone))])])],1)],1)],1)],1):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"单号",prop:"number",width:"60"}}),a("el-table-column",{attrs:{align:"center",label:"用户"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.userName))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品数量",prop:"goodsCount",width:"80"}}),a("el-table-column",{attrs:{align:"center",label:"总金额",prop:"allPrice"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("₩ "+t._s(e.row.allPrice.toLocaleString()))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"实际金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("₩ "+t._s(e.row.realPrice.toLocaleString()))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"支付状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["PAID"===e.row.payState?a("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(t._f("payStateFormat")(e.row.payState))+" ")]):t._e(),"PAY_LATER"===e.row.payState?a("el-tag",{attrs:{type:"warning"}},[t._v(" "+t._s(t._f("payStateFormat")(e.row.payState))+" ")]):t._e(),"UN_PAY"===e.row.payState?a("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(t._f("payStateFormat")(e.row.payState))+" ")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["FINISHED"===e.row.orderState?a("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(t._f("orderStateFormat")(e.row.orderState))+" ")]):"REFUND"===e.row.orderState?a("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(t._f("orderStateFormat")(e.row.orderState))+" ")]):"EXPIRED"===e.row.orderState?a("el-tag",{attrs:{type:"info"}},[t._v(" "+t._s(t._f("orderStateFormat")(e.row.orderState))+" ")]):a("el-tag",[t._v(" "+t._s(t._f("orderStateFormat")(e.row.orderState))+" ")]),1===e.row.deleted?a("el-tag",{attrs:{type:"info"}},[t._v(" 已删除 ")]):t._e()]}}])}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createDate"}})],1),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{"current-page":t.page.current,"page-size":t.page.size,"page-sizes":[10,50,100],total:t.page.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)},b=[],y=(a("7db0"),a("4160"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),C=a("f8b7"),_=a("ed08"),w={name:"SimpleOrderDialog",filters:{orderStateFormat:function(t){return Object(_["e"])(t)},payStateFormat:function(t){return Object(_["f"])(t)}},watch:{dialogFormVisible:function(){this.dialogFormVisible&&(this.page.current=1,this.getList())}},computed:{title:function(){var t="";return t=this.formData.orderState?Object(_["e"])(this.formData.orderState):this.formData.paymentWay?Object(_["g"])(this.formData.paymentWay):"全部",t+"的订单"}},data:function(){return{dialogFormVisible:!1,page:{current:1,size:10,total:0},formData:{orderState:null,paymentWay:null,showDelete:0},listLoading:!1,tableData:[]}},methods:{getList:function(){var t=this,e=Object(_["k"])(new Date,"{y}-{m}-{d}"),a=Object.assign({},this.formData);a.startDate=e,a.endDate=e,C["a"].getOrderListByPage(this.page,a).then((function(e){var a=e.records;a.forEach((function(t){t.detail={}})),t.tableData=a,t.page.total=parseInt(e.total)})).finally((function(){t.listLoading=!1}))},getOrderDetail:function(t,e){var a=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.find((function(e){return e.id===t.id})),void 0===n){r.next=4;break}return r.next=4,C["a"].getOrderDetail(t.id).then((function(t){a.$set(n,"detail",t)}));case 4:case"end":return r.stop()}}),r)})))()},openDialog:function(t,e){this.formData.orderState=t,this.formData.paymentWay=e,this.dialogFormVisible=!0},handleSizeChange:function(t){this.page.size=t,this.getList()},handleCurrentChange:function(t){this.page.current=t,this.getList()}}},O=w,D=(a("b6ae"),a("eb41"),a("2877")),k=Object(D["a"])(O,v,b,!1,null,"67f0310a",null),S=k.exports,x={props:{dashboardData:{type:Object,required:!0}},components:{CountTo:g.a,SimpleOrderDialog:S},computed:Object(s["a"])({},Object(i["b"])(["userData"])),methods:{onCardClick:function(t,e){this.$refs["simple-order-dialog"].openDialog(t,e)}}},E=x,$=(a("01b6"),Object(D["a"])(E,h,m,!1,null,"c7c820bc",null)),j=$.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"panel-group",attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"waiting"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 待配送 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.waitDeliveryCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"delivery"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 配送中 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.deliveringCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"finish"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 已完成 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.finishCount,"start-val":0}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{lg:6,sm:12,xs:24}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper icon-money"},[a("svg-icon",{attrs:{"class-name":"card-panel-icon","icon-class":"refund"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 已退款 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{duration:3200,"end-val":t.dashboardData.refundCount,"start-val":0}})],1)])])],1)],1)},A=[],R={props:{dashboardData:{type:Object,required:!0}},components:{CountTo:g.a},computed:Object(s["a"])({},Object(i["b"])(["userData"]))},I=R,P=(a("e6c8"),Object(D["a"])(I,L,A,!1,null,"4c5cff44",null)),z=P.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},B=[],N=(a("d81d"),a("313e")),W=a.n(N),F={data:function(){return{$_sidebarElm:null}},mounted:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_resizeHandler:function(){var t=this;return Object(_["b"])((function(){t.chart&&t.chart.resize()}),100)()},$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var M={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},dashboardData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=W.a.init(this.$el,"macarons"),this.setOptions(this.dashboardData.perHourOrderCount)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hours,a=t.preHourOrderCount;e=e.map((function(t){return t+"点"})),this.chart.setOption({xAxis:{data:e,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["时刻订单数"]},series:[{name:"时刻订单数",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:a,animationDuration:2800,animationEasing:"cubicInOut"}]})}}},q=M,V=Object(D["a"])(q,T,B,!1,null,null,null),H=V.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},K=[];a("817d");var Y={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},dashboardData:{type:Object,required:!0}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=W.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["微信","支付宝","通帐转账","现金","刷卡"]},series:[{name:"今日支付占比",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:[{value:this.dashboardData.wechatOrderAllCount,name:"微信"},{value:this.dashboardData.alipayOrderAllCount,name:"支付宝"},{value:this.dashboardData.transferOrderAllCount,name:"通帐转账"},{value:this.dashboardData.cashOrderAllCount,name:"现金"},{value:this.dashboardData.creditOrderAllCount,name:"刷卡"}],animationEasing:"cubicInOut",animationDuration:2600}]})}}},U=Y,Z=Object(D["a"])(U,G,K,!1,null,null,null),J=Z.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},X=[];a("b64b");a("817d");var tt=6e3,et={mixins:[F],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},dashboardData:{type:Object,required:!0}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.dashboardData.topSaleGoodsList.map((function(t){return Object.keys(t)[0]})),a=t.dashboardData.topSaleGoodsList.map((function(t){return t[Object.keys(t)[0]]}));t.initChart(e,a)}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(t,e){this.chart=W.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"line"}},grid:{top:10,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:t,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{name:"数量",type:"bar",stack:"vistors",barWidth:"60%",data:e,animationDuration:tt}]})}}},at=et,rt=Object(D["a"])(at,Q,X,!1,null,null,null),nt=rt.exports,st=a("555e"),it={name:"BaseDashboard",components:{BaseCard:p["a"],PanelGroup:j,PanelGroup2:z,LineChart:H,PieChart:J,BarChart:nt,OrderNaverMap:st["a"]},data:function(){return{dashboardData:null}},computed:Object(s["a"])({},Object(i["b"])(["userData"])),created:function(){var t=this;u.getDashboardData().then((function(e){t.dashboardData=e}))}},ot=it,lt=(a("1732"),Object(D["a"])(ot,o,l,!1,null,"08bd5e5e",null)),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-contain"},[a("el-button",{staticStyle:{"margin-bottom":"10px",float:"right"},attrs:{icon:"el-icon-switch-button",round:"",size:"small",type:"danger"},on:{click:t.logout}},[t._v(" 退出 ")]),a("base-card",{staticStyle:{clear:"both"}},[a("div",{staticClass:"dashboard-text"},[t._v("name: "+t._s(t.userData.userName))])])],1)},ut=[],pt={name:"DelivererDashboard",components:{BaseCard:p["a"]},data:function(){return{}},computed:Object(s["a"])({},Object(i["b"])(["userData"])),methods:{logout:function(){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("admin/logout");case 2:t.$router.push("/login?redirect=".concat(t.$route.fullPath));case 3:case"end":return e.stop()}}),e)})))()}}},ht=pt,mt=Object(D["a"])(ht,dt,ut,!1,null,"a28189e6",null),ft=mt.exports,gt={name:"Dashboard",components:{BaseDashboard:ct,DelivererDashboard:ft},data:function(){return{currentRole:"BaseDashboard"}},computed:Object(s["a"])({},Object(i["b"])(["roles"])),created:function(){this.roles.includes("DELIVERER")&&(this.currentRole="DelivererDashboard")}},vt=gt,bt=Object(D["a"])(vt,r,n,!1,null,null,null);e["default"]=bt.exports},b6ae:function(t,e,a){"use strict";var r=a("e5fb"),n=a.n(r);n.a},b8d2:function(t,e,a){},e5fb:function(t,e,a){},e6c8:function(t,e,a){"use strict";var r=a("79e3"),n=a.n(r);n.a},eb41:function(t,e,a){"use strict";var r=a("2895"),n=a.n(r);n.a}}]);