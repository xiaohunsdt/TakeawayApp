(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32551a8c"],{"0c23":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.adminId?"管理员详情":"生成新管理员",visible:t.dialogFormVisible,size:"mini",width:"400px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[t.adminId?a("el-form-item",{attrs:{label:"管理员ID","label-width":"120"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData.id,callback:function(e){t.$set(t.formData,"id",e)},expression:"formData.id"}})],1):t._e(),a("el-form-item",{attrs:{label:"用户名","label-width":"120"}},[a("el-input",{attrs:{disabled:null!==t.adminId&&void 0!==t.adminId},model:{value:t.formData.userName,callback:function(e){t.$set(t.formData,"userName",e)},expression:"formData.userName"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"120"}},[a("el-input",{model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("el-form-item",{attrs:{label:"级别","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请输入关键词"},model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}},[a("el-option",{directives:[{name:"permission",rawName:"v-permission",value:["SUPER_MANAGER"],expression:"['SUPER_MANAGER']"}],attrs:{label:"店管理员",value:"SHOP_MANAGER"}}),a("el-option",{directives:[{name:"permission",rawName:"v-permission",value:["SUPER_MANAGER","SHOP_MANAGER"],expression:"['SUPER_MANAGER','SHOP_MANAGER']"}],attrs:{label:"接单员",value:"RECEIVER"}}),a("el-option",{directives:[{name:"permission",rawName:"v-permission",value:["SUPER_MANAGER","SHOP_MANAGER"],expression:"['SUPER_MANAGER','SHOP_MANAGER']"}],attrs:{label:"外卖员",value:"DELIVERER"}})],1)],1),a("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:["SUPER_MANAGER"],expression:"['SUPER_MANAGER']"}],attrs:{label:"店铺Id","label-width":"120"}},[a("el-input",{model:{value:t.formData.storeId,callback:function(e){t.$set(t.formData,"storeId",e)},expression:"formData.storeId"}})],1),a("el-form-item",{attrs:{label:"状态","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请输入关键词"},model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}},[a("el-option",{attrs:{label:"冻结",value:"STOP"}}),a("el-option",{attrs:{label:"正常",value:"NORMAL"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t.adminId?a("el-button",{attrs:{type:"primary"},on:{click:t.onEdit}},[t._v("修 改")]):a("el-button",{attrs:{type:"success"},on:{click:t.onSave}},[t._v("生 成")])],1)],1)},o=[],n=(a("d3b7"),a("50fc")),l=a("4381"),s={name:"AdminDialog",directives:{permission:l["a"]},data:function(){return{dialogFormVisible:!1,adminId:null,formData:{id:null,storeId:null,userName:null,password:null,level:null,state:null},loading:!1}},watch:{dialogFormVisible:function(){this.dialogFormVisible?this.init():this.formData=this.$options.data().formData}},methods:{init:function(){var t=this;this.adminId&&(this.loading=!0,n["a"].getAdminInfoById(this.adminId).then((function(e){t.formData=e})).finally((function(e){t.loading=!1})))},openDialog:function(t,e){this.adminId=t,this.formData.storeId=e,this.dialogFormVisible=!0},onEdit:function(){var t=this;n["a"].updateAdmin(this.formData).then((function(e){t.$message({message:e.message,type:"success"}),t.$emit("updated-admin",t.formData)}))},onSave:function(){var t=this;n["a"].createNewSubAdmin(this.formData).then((function(e){t.$message({message:e.message,type:"success"}),t.$emit("updated-admin",t.formData)}))}}},r=s,c=a("2877"),d=Object(c["a"])(r,i,o,!1,null,"26221fff",null);e["a"]=d.exports},"179c":function(t,e,a){"use strict";var i=a("96f3"),o=a.n(i);o.a},4381:function(t,e,a){"use strict";a("caad"),a("45fc"),a("2532");var i=a("4360"),o={inserted:function(t,e,a){var o=e.value,n=i["a"].getters&&i["a"].getters.roles;if(!(o&&o instanceof Array&&o.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var l=o,s=n.some((function(t){return l.includes(t)}));s||t.parentNode&&t.parentNode.removeChild(t)}},n=function(t){t.directive("permission",o)};window.Vue&&(window["permission"]=o,Vue.use(n)),o.install=n;e["a"]=o},"62ab":function(t,e,a){"use strict";var i=a("e3b4"),o=a.n(i);o.a},"73f5":function(t,e,a){"use strict";var i=a("b775"),o=a("4328"),n=a.n(o);function l(){return Object(i["a"])({url:"/store/getStoreQRcode",method:"get"})}function s(t,e){var a=Object.assign({},t,e);return Object(i["a"])({url:"/store/getListByPage",method:"post",data:a,transformRequest:[function(t){return t=n.a.stringify(t),t}]})}function r(t){return Object(i["a"])({url:"/store/create",method:"post",data:t,transformRequest:[function(t){return t=n.a.stringify(t),t}]})}function c(t){return Object(i["a"])({url:"/store/update",method:"post",data:t,transformRequest:[function(t){return t=n.a.stringify(t),t}]})}e["a"]={getStoreQRcode:l,getListByPage:s,create:r,update:c}},"96f3":function(t,e,a){},a145:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base-card"},[t._t("default")],2)},o=[],n={name:"BaseCard"},l=n,s=(a("179c"),a("2877")),r=Object(s["a"])(l,i,o,!1,null,"9e9f1e78",null);e["a"]=r.exports},bb50:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("base-card",{staticClass:"container-header"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formData,size:"mini"}},[a("el-form-item",{attrs:{label:"级别"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.onCreate}},[t._v("添加新店铺")])],1)],1)],1),a("base-card",{staticClass:"container-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.tableData,"element-loading-text":"正在加载中...","highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"名称",prop:"name",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"收费方式",prop:"paymentWay",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"到期时间",prop:"expireDate",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"state",width:"200"}}),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createDate"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.onEdit(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.onCreateAdmin(e.row.id)}}},[t._v("添加管理员")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{"current-page":t.page.current,"page-size":t.page.size,"page-sizes":[15,50,100],total:t.page.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("store-dialog",{ref:"store-dialog",on:{"updated-store":t.onUpdatedStore}}),a("admin-dialog",{ref:"admin-dialog"})],1)},o=[],n=a("a145"),l=a("0c23"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.storeId?"店铺详情":"生成店铺",visible:t.dialogFormVisible,size:"mini",width:"400px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[t.storeId?a("el-form-item",{attrs:{label:"店铺ID","label-width":"70px"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData.id,callback:function(e){t.$set(t.formData,"id",e)},expression:"formData.id"}})],1):t._e(),a("el-form-item",{attrs:{label:"店铺名","label-width":"70px"}},[a("el-input",{attrs:{disabled:null!==t.storeId&&void 0!==t.storeId},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"支付方式","label-width":"70px"}},[a("el-select",{attrs:{placeholder:"请选择关键字"},model:{value:t.formData.paymentWay,callback:function(e){t.$set(t.formData,"paymentWay",e)},expression:"formData.paymentWay"}},[a("el-option",{attrs:{label:"免费",value:"FREE"}}),a("el-option",{attrs:{label:"按量计费",value:"PAY_AS_YOU_GO"}}),a("el-option",{attrs:{label:"包月",value:"MONTH"}})],1)],1),a("el-form-item",{attrs:{label:"到期时间","label-width":"70px"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:"MONTH"!==t.formData.paymentWay,"value-format":"yyyy-MM-dd"},model:{value:t.formData.expireDate,callback:function(e){t.$set(t.formData,"expireDate",e)},expression:"formData.expireDate"}})],1),a("el-form-item",{attrs:{label:"状态","label-width":"70px"}},[a("el-select",{attrs:{placeholder:"请输入关键词"},model:{value:t.formData.state,callback:function(e){t.$set(t.formData,"state",e)},expression:"formData.state"}},[a("el-option",{attrs:{label:"停止",value:"OFF"}}),a("el-option",{attrs:{label:"正常",value:"ON"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t.storeId?a("el-button",{attrs:{type:"primary"},on:{click:t.onEdit}},[t._v("修 改")]):a("el-button",{attrs:{type:"success"},on:{click:t.onSave}},[t._v("生 成")])],1)],1)},r=[],c=a("73f5"),d=a("4381"),m={name:"StoreDialog",directives:{permission:d["a"]},data:function(){return{dialogFormVisible:!1,storeId:null,formData:{id:null,name:null,paymentWay:null,expireDate:null,state:null},loading:!1}},watch:{dialogFormVisible:function(){this.dialogFormVisible?this.init():this.formData=this.$options.data().formData}},methods:{init:function(){var t=this;this.storeId&&(this.loading=!0,c["a"].getStoreById(this.storeId).then((function(e){t.formData=e,t.loading=!1})).catch((function(e){t.loading=!1})))},openDialog:function(t){this.storeId=t,this.dialogFormVisible=!0},onEdit:function(){var t=this;c["a"].update(this.formData).then((function(e){t.$message({message:e.message,type:"success"}),t.$emit("updated-store",t.formData)}))},onSave:function(){var t=this;c["a"].create(this.formData).then((function(e){t.$message({message:e.message,type:"success"}),t.$emit("updated-store",t.formData)}))}}},u=m,f=a("2877"),p=Object(f["a"])(u,s,r,!1,null,"3d9008ef",null),b=p.exports,g={name:"StoreManagement",components:{BaseCard:n["a"],AdminDialog:l["a"],StoreDialog:b},data:function(){return{page:{current:1,size:15,total:0},formData:{type:null,state:null},listLoading:!1,tableData:[]}},created:function(){this.onSearch()},methods:{getList:function(){var t=this;this.listLoading=!0,c["a"].getListByPage(this.page,this.formData).then((function(e){t.tableData=e.records,t.page.total=parseInt(e.total),t.listLoading=!1})).catch((function(){t.listLoading=!1}))},handleSizeChange:function(t){this.page.size=t,this.getList()},handleCurrentChange:function(t){this.page.current=t,this.getList()},onSearch:function(){this.page.current=1,this.getList()},onCreate:function(){this.$refs["store-dialog"].openDialog()},onEdit:function(t){this.$refs["store-dialog"].openDialog(t)},onCreateAdmin:function(t){this.$refs["admin-dialog"].openDialog(null,t)},onUpdatedStore:function(){this.onSearch()}}},h=g,v=(a("62ab"),Object(f["a"])(h,i,o,!1,null,"7b519b49",null));e["default"]=v.exports},e3b4:function(t,e,a){}}]);