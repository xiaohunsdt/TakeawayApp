(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f854ced"],{"178e":function(e,t,s){"use strict";var r=s("b775"),n=s("4328"),i=s.n(n);function a(){return Object(r["a"])({url:"/setting/getAllSetting",method:"get"})}function o(e,t){return Object(r["a"])({url:"/setting/getSettingByKey",method:"post",data:{key:e,scope:t},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return e=i.a.stringify(e),e}]})}function l(e){return Object(r["a"])({url:"/setting/getSettingsByScope",method:"post",data:{scope:e},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return e=i.a.stringify(e),e}]})}function c(e,t){e.scope=t;var s=e;return Object(r["a"])({url:"/setting/updateSetting",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s,transformRequest:[function(e){return e=i.a.stringify(e),e}]})}t["a"]={getAllSetting:a,getSettingByKey:o,getSettingsByScope:l,updateSetting:c}},"179c":function(e,t,s){"use strict";var r=s("96f3"),n=s.n(r);n.a},"2f94":function(e,t,s){"use strict";var r=s("b775"),n=s("4328"),i=s.n(n);function a(e,t){var s=Object.assign({},e,t);return Object(r["a"])({url:"/address/getAddressListByPage",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s,transformRequest:[function(e){return e=i.a.stringify(e),e}]})}function o(e){return Object(r["a"])({url:"/address/getAddressById",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{addressId:e},transformRequest:[function(e){return e=i.a.stringify(e),e}]})}function l(e){return Object(r["a"])({url:"/address/searchAddress",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{address:e},transformRequest:[function(e){return e=i.a.stringify(e),e}]})}function c(e){return Object(r["a"])({url:"/address/updateAddress",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,transformRequest:[function(e){return e=i.a.stringify(e),e}]})}t["a"]={getAddressListByPage:a,getAddressById:o,searchAddress:l,updateAddress:c}},"5e1f":function(e,t,s){},"7db0":function(e,t,s){"use strict";var r=s("23e7"),n=s("b727").find,i=s("44d2"),a=s("ae40"),o="find",l=!0,c=a(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},"955b":function(e,t,s){"use strict";var r=s("db3d"),n=s.n(r);n.a},"96f3":function(e,t,s){},a145:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"base-card"},[e._t("default")],2)},n=[],i={name:"BaseCard"},a=i,o=(s("179c"),s("2877")),l=Object(o["a"])(a,r,n,!1,null,"9e9f1e78",null);t["a"]=l.exports},b7a2:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("base-card",[s("el-tabs",{attrs:{type:"card"}},[s("el-tab-pane",{attrs:{label:"系统设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.systemSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"接单服务"}},[s("el-tooltip",{attrs:{content:"当前是否正常结单",placement:"right"}},[s("el-switch",{model:{value:e.systemSetting.service_running,callback:function(t){e.$set(e.systemSetting,"service_running",t)},expression:"systemSetting.service_running"}})],1)],1),e.systemSetting.service_running?e._e():s("el-form-item",{attrs:{label:"服务关闭提送"}},[s("el-tooltip",{attrs:{content:"当接单服务关闭时给用户看的提示信息",placement:"right"}},[s("el-input",{model:{value:e.systemSetting.service_close_notice,callback:function(t){e.$set(e.systemSetting,"service_close_notice",t)},expression:"systemSetting.service_close_notice"}})],1)],1),s("el-form-item",{attrs:{label:"商品页公告"}},[s("el-input",{model:{value:e.systemSetting.goods_page_notice,callback:function(t){e.$set(e.systemSetting,"goods_page_notice",t)},expression:"systemSetting.goods_page_notice"}})],1),s("el-form-item",{attrs:{label:"商品页标签"}},[s("el-tooltip",{attrs:{content:"多个标签用,分隔!例如:免费配送,快速送达,满2w送饮料",placement:"right"}},[s("el-input",{model:{value:e.systemSetting.goods_page_tags,callback:function(t){e.$set(e.systemSetting,"goods_page_tags",t)},expression:"systemSetting.goods_page_tags"}})],1)],1),s("el-form-item",[s("el-button",{attrs:{loading:e.saveLoading,type:"primary"},on:{click:function(t){return e.saveSetting("SYSTEM")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"店铺设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.storeSetting,"label-width":"130px",size:"mini"}},[s("el-form-item",{attrs:{label:"运营周期",size:"small"}},[s("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.storeSetting.store_open_date,callback:function(t){e.$set(e.storeSetting,"store_open_date",t)},expression:"storeSetting.store_open_date"}},[s("el-checkbox-button",{attrs:{label:"2"}},[e._v("星期一")]),s("el-checkbox-button",{attrs:{label:"3"}},[e._v("星期二")]),s("el-checkbox-button",{attrs:{label:"4"}},[e._v("星期三")]),s("el-checkbox-button",{attrs:{label:"5"}},[e._v("星期四")]),s("el-checkbox-button",{attrs:{label:"6"}},[e._v("星期五")]),s("el-checkbox-button",{attrs:{label:"7"}},[e._v("星期六")]),s("el-checkbox-button",{attrs:{label:"1"}},[e._v("星期日")])],1)],1),s("el-form-item",{attrs:{label:"运营时间"}},[s("el-time-picker",{attrs:{"end-placeholder":"关门时间","is-range":"",placeholder:"选择运营时间范围","range-separator":"至","start-placeholder":"开门时间"},model:{value:e.timePickValue,callback:function(t){e.timePickValue=t},expression:"timePickValue"}})],1),s("el-form-item",{attrs:{label:"店铺地址"}},[s("el-select",{staticStyle:{display:"block"},attrs:{loading:e.searchLoading,"remote-method":e.onSearch,filterable:"",placeholder:"请输入关键词",remote:"","reserve-keyword":""},on:{change:e.onSelect},model:{value:e.storeSetting.store_address,callback:function(t){e.$set(e.storeSetting,"store_address",t)},expression:"storeSetting.store_address"}},e._l(e.addressList,(function(e){return s("el-option",{key:e.address,attrs:{label:e.address,value:e.address}})})),1)],1),s("el-form-item",{attrs:{label:"地址经度"}},[s("el-input",{attrs:{disabled:""},model:{value:e.storeSetting.store_address_x,callback:function(t){e.$set(e.storeSetting,"store_address_x",t)},expression:"storeSetting.store_address_x"}})],1),s("el-form-item",{attrs:{label:"地址纬度"}},[s("el-input",{attrs:{disabled:""},model:{value:e.storeSetting.store_address_y,callback:function(t){e.$set(e.storeSetting,"store_address_y",t)},expression:"storeSetting.store_address_y"}})],1),s("el-form-item",{attrs:{label:"厨师体温"}},[s("el-input",{model:{value:e.storeSetting.temperature1,callback:function(t){e.$set(e.storeSetting,"temperature1",t)},expression:"storeSetting.temperature1"}})],1),s("el-form-item",{attrs:{label:"外卖员体温"}},[s("el-input",{model:{value:e.storeSetting.temperature2,callback:function(t){e.$set(e.storeSetting,"temperature2",t)},expression:"storeSetting.temperature2"}})],1),s("el-form-item",{attrs:{label:"老板体温"}},[s("el-input",{model:{value:e.storeSetting.temperature3,callback:function(t){e.$set(e.storeSetting,"temperature3",t)},expression:"storeSetting.temperature3"}})],1),s("el-form-item",{attrs:{label:"打包员体温"}},[s("el-input",{model:{value:e.storeSetting.temperature4,callback:function(t){e.$set(e.storeSetting,"temperature4",t)},expression:"storeSetting.temperature4"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("STORE")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"配送设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.expressSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"最低起送价格"}},[s("el-tooltip",{attrs:{content:"最低起送价格",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.lowest_order_price,callback:function(t){e.$set(e.expressSetting,"lowest_order_price",e._n(t))},expression:"expressSetting.lowest_order_price"}})],1)],1),s("el-form-item",{attrs:{label:"最远配送距离"}},[s("el-tooltip",{attrs:{content:"最远配送距离，单位为米",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.max_express_distance,callback:function(t){e.$set(e.expressSetting,"max_express_distance",e._n(t))},expression:"expressSetting.max_express_distance"}})],1)],1),s("el-form-item",{attrs:{label:"配送费"}},[s("el-tooltip",{attrs:{content:"每单收取的配送费",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.delivery_price,callback:function(t){e.$set(e.expressSetting,"delivery_price",e._n(t))},expression:"expressSetting.delivery_price"}})],1)],1),s("el-form-item",{attrs:{label:"起送价范围设置"}},[s("el-tooltip",{attrs:{content:"距离不同,起送价格不同",placement:"right"}},[s("dynamic-input",{model:{value:e.expressSetting.distance_price_arr,callback:function(t){e.$set(e.expressSetting,"distance_price_arr",t)},expression:"expressSetting.distance_price_arr"}})],1)],1),s("el-form-item",{attrs:{label:"基本配送时间"}},[s("el-tooltip",{attrs:{content:"只有一单的情况下,配送需要多长时间",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.base_express_time,callback:function(t){e.$set(e.expressSetting,"base_express_time",e._n(t))},expression:"expressSetting.base_express_time"}})],1)],1),s("el-form-item",{attrs:{label:"配送平均时间"}},[s("el-tooltip",{attrs:{content:"一般情况下，平均每单的配送时间",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.average_express_time,callback:function(t){e.$set(e.expressSetting,"average_express_time",e._n(t))},expression:"expressSetting.average_express_time"}})],1)],1),s("el-form-item",{attrs:{label:"外卖人员"}},[s("el-input",{model:{value:e.expressSetting.deliverier_count,callback:function(t){e.$set(e.expressSetting,"deliverier_count",e._n(t))},expression:"expressSetting.deliverier_count"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("EXPRESS")}}},[e._v("保存设置")])],1)],1)],1)],1)],1)],1)},n=[],i=(s("7db0"),s("4160"),s("a15b"),s("ac1f"),s("1276"),s("159b"),s("a145")),a=s("178e"),o=s("2f94"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tag-view"},[e._l(e.distancePriceArr,(function(t){return s("el-tag",{key:t.key,attrs:{"disable-transitions":!1,closable:""},on:{close:function(s){return e.handleClose(t)}}},[e._v(" "+e._s(t.key)+"米以上, 起送价: ₩ "+e._s(t.value)+" ")])})),e.inputVisible?e._e():s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加")])],2),e.inputVisible?s("div",{staticClass:"dynamic-input"},[s("div",{staticClass:"add-operation"},[s("el-input",{staticClass:"input-with-select",staticStyle:{width:"120px","margin-right":"8px"},attrs:{placeholder:"请输入距离下限"},model:{value:e.key,callback:function(t){e.key=e._n(t)},expression:"key"}}),e._v(" : "),s("el-input",{staticClass:"input-with-select",staticStyle:{width:"120px",margin:"0px 8px"},attrs:{placeholder:"请输入起送价格"},model:{value:e.value,callback:function(t){e.value=e._n(t)},expression:"value"}}),s("el-button",{attrs:{type:"success"},on:{click:e.handleInputConfirm}},[e._v("添加")])],1)]):e._e()])},c=[],u=(s("c975"),s("a434"),s("5c96")),d={name:"DynamicInput",model:{prop:"distancePriceArr",event:"change"},props:{distancePriceArr:{type:Array,required:!0}},data:function(){return{inputVisible:!1,key:null,value:null}},methods:{handleClose:function(e){this.distancePriceArr.splice(this.distancePriceArr.indexOf(e),1)},showInput:function(){this.inputVisible=!0},handleInputConfirm:function(){if(this.key&&this.value){this.distancePriceArr.forEach((function(e){}));for(var e=0;e<this.distancePriceArr.length;e++){var t=this.distancePriceArr[e];if(t.key===this.key)return void Object(u["Message"])({message:"存在相同距离的设置! 请确认!",type:"error",duration:3e3})}this.distancePriceArr.push({key:this.key,value:this.value})}this.inputVisible=!1,this.key="",this.value="",this.distancePriceArr.sort((function(e,t){return t.key-e.key})),this.$emit("change",this.distancePriceArr)}}},p=d,m=(s("955b"),s("2877")),g=Object(m["a"])(p,l,c,!1,null,"c0d8c8a2",null),_=g.exports,f={name:"SysManagement",components:{BaseCard:i["a"],DynamicInput:_},created:function(){this.init(0)},data:function(){return{saveLoading:!1,timePickValue:[new Date,new Date],systemSetting:{service_running:!0,service_close_notice:"",goods_page_notice:"",goods_page_tags:""},storeSetting:{store_open_date:[],store_open_time:null,store_close_time:null,store_address:"",store_address_x:null,store_address_y:null,temperature1:null,temperature2:null,temperature3:null,temperature4:null},expressSetting:{lowest_order_price:0,delivery_price:0,distance_price_arr:[],base_express_time:0,average_express_time:0,deliverier_count:0,max_express_distance:0},searchLoading:!1,addressList:[]}},methods:{init:function(){var e=this;a["a"].getSettingsByScope("SYSTEM").then((function(t){t.forEach((function(t){"service_running"!==t.key?e.$set(e.systemSetting,t.key,t.value):e.$set(e.systemSetting,t.key,"true"===t.value)}))})),a["a"].getSettingsByScope("STORE").then((function(t){t.forEach((function(t){"store_open_date"===t.key?e.$set(e.storeSetting,t.key,t.value.split(",")):("store_open_time"===t.key&&e.$set(e.timePickValue,0,new Date(t.value)),"store_close_time"===t.key&&e.$set(e.timePickValue,1,new Date(t.value)),e.$set(e.storeSetting,t.key,t.value))}))})),a["a"].getSettingsByScope("EXPRESS").then((function(t){t.forEach((function(t){"distance_price_arr"!==t.key?e.$set(e.expressSetting,t.key,t.value):e.$set(e.expressSetting,t.key,JSON.parse(t.value))}))}))},saveSetting:function(e){var t,s=this;switch(e){case"SYSTEM":t=this.systemSetting;break;case"STORE":t=Object.assign({},this.storeSetting),t.store_open_date=t.store_open_date.join(),t.store_open_time=this.timePickValue[0],t.store_close_time=this.timePickValue[1];break;case"EXPRESS":t=Object.assign({},this.expressSetting),t.distance_price_arr=JSON.stringify(t.distance_price_arr);break}this.saveLoading=!0,a["a"].updateSetting(t,e).then((function(e){s.saveLoading=!1,s.$message({message:e.message,type:"success"})})).catch((function(e){s.saveLoading=!1}))},onSearch:function(e){var t=this;""!==e?(this.searchLoading=!0,o["a"].searchAddress(e).then((function(e){t.addressList=e,t.searchLoading=!1})).catch((function(){t.addressList=[],t.searchLoading=!1}))):this.addressList=[]},onSelect:function(e){var t=this.addressList.find((function(t){return t.address===e}));this.storeSetting.store_address=t.address,this.storeSetting.store_address_x=t.x,this.storeSetting.store_address_y=t.y}}},b=f,h=(s("efe9"),Object(m["a"])(b,r,n,!1,null,"2c57eaca",null));t["default"]=h.exports},db3d:function(e,t,s){},efe9:function(e,t,s){"use strict";var r=s("5e1f"),n=s.n(r);n.a}}]);