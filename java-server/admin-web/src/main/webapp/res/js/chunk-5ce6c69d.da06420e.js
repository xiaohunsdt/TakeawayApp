(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ce6c69d"],{"178e":function(e,t,s){"use strict";var n=s("b775"),a=s("4328"),r=s.n(a);function i(){return Object(n["a"])({url:"/setting/getAllSetting",method:"get"})}function o(e,t){return Object(n["a"])({url:"/setting/getSettingByKey",method:"post",data:{key:e,scope:t},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return e=r.a.stringify(e),e}]})}function l(e){return Object(n["a"])({url:"/setting/getSettingsByScope",method:"post",data:{scope:e},headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return e=r.a.stringify(e),e}]})}function c(e,t){e.scope=t;var s=e;return Object(n["a"])({url:"/setting/updateSetting",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s,transformRequest:[function(e){return e=r.a.stringify(e),e}]})}t["a"]={getAllSetting:i,getSettingByKey:o,getSettingsByScope:l,updateSetting:c}},"1a66":function(e,t,s){"use strict";var n=s("ab16"),a=s.n(n);a.a},"2f94":function(e,t,s){"use strict";var n=s("b775"),a=s("4328"),r=s.n(a);function i(e,t){var s=Object.assign({},e,t);return Object(n["a"])({url:"/address/getAddressListByPage",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s,transformRequest:[function(e){return e=r.a.stringify(e),e}]})}function o(e){return Object(n["a"])({url:"/address/getAddressById",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{addressId:e},transformRequest:[function(e){return e=r.a.stringify(e),e}]})}function l(e){return Object(n["a"])({url:"/address/searchAddress",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{address:e},transformRequest:[function(e){return e=r.a.stringify(e),e}]})}function c(e){return Object(n["a"])({url:"/address/updateAddress",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e,transformRequest:[function(e){return e=r.a.stringify(e),e}]})}t["a"]={getAddressListByPage:i,getAddressById:o,searchAddress:l,updateAddress:c}},"7db0":function(e,t,s){"use strict";var n=s("23e7"),a=s("b727").find,r=s("44d2"),i=s("ae40"),o="find",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},ab16:function(e,t,s){},ab85:function(e,t,s){"use strict";var n=s("b902"),a=s.n(n);a.a},b7a2:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("base-card",[s("el-tabs",{attrs:{type:"card"}},[s("el-tab-pane",{attrs:{label:"系统设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.systemSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"接单服务"}},[s("el-tooltip",{attrs:{content:"是否允许下单",placement:"right"}},[s("el-switch",{model:{value:e.systemSetting.service_running,callback:function(t){e.$set(e.systemSetting,"service_running",t)},expression:"systemSetting.service_running"}})],1)],1),e.systemSetting.service_running?e._e():s("el-form-item",{attrs:{label:"服务关闭提送"}},[s("el-tooltip",{attrs:{content:"当接单服务关闭时给用户看的提示信息",placement:"right"}},[s("el-input",{model:{value:e.systemSetting.service_close_notice,callback:function(t){e.$set(e.systemSetting,"service_close_notice",t)},expression:"systemSetting.service_close_notice"}})],1)],1),s("el-form-item",{attrs:{label:"自动接单"}},[s("el-tooltip",{attrs:{content:"是否允许系统自动接单",placement:"right"}},[s("el-switch",{model:{value:e.systemSetting.auto_receive_order,callback:function(t){e.$set(e.systemSetting,"auto_receive_order",t)},expression:"systemSetting.auto_receive_order"}})],1)],1),s("el-form-item",{attrs:{label:"商品页公告"}},[s("el-input",{model:{value:e.systemSetting.goods_page_notice,callback:function(t){e.$set(e.systemSetting,"goods_page_notice",t)},expression:"systemSetting.goods_page_notice"}})],1),s("el-form-item",{attrs:{label:"商品页标签"}},[s("el-tooltip",{attrs:{content:"多个标签用,分隔!例如:免费配送,快速送达,满2w送饮料",placement:"right"}},[s("el-input",{model:{value:e.systemSetting.goods_page_tags,callback:function(t){e.$set(e.systemSetting,"goods_page_tags",t)},expression:"systemSetting.goods_page_tags"}})],1)],1),s("el-form-item",[s("el-button",{attrs:{loading:e.saveLoading,type:"primary"},on:{click:function(t){return e.saveSetting("SYSTEM")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"店铺设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.storeSetting,"label-width":"130px",size:"mini"}},[s("el-form-item",{attrs:{label:"店铺Logo"}},[s("el-upload",{ref:"upload",attrs:{action:e.$VUE_APP_BASE_API+"/api/admin/uploadStoreLogo","before-upload":e.beforeUpload,headers:e.authHeader,multiple:!1,"on-success":e.handleUploadSuccess,"show-file-list":!1}},[""!==e.storeSetting.store_logo?s("img",{staticStyle:{height:"150px",width:"auto"},attrs:{src:e.$VUE_APP_BASE_API+e.storeSetting.store_logo}}):s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过5M！建议上传长宽相等的正方形图片")])],1)],1),s("el-form-item",{attrs:{label:"运营周期",size:"small"}},[s("el-checkbox-group",{attrs:{size:"mini"},model:{value:e.storeSetting.store_open_date,callback:function(t){e.$set(e.storeSetting,"store_open_date",t)},expression:"storeSetting.store_open_date"}},[s("el-checkbox-button",{attrs:{label:"2"}},[e._v("星期一")]),s("el-checkbox-button",{attrs:{label:"3"}},[e._v("星期二")]),s("el-checkbox-button",{attrs:{label:"4"}},[e._v("星期三")]),s("el-checkbox-button",{attrs:{label:"5"}},[e._v("星期四")]),s("el-checkbox-button",{attrs:{label:"6"}},[e._v("星期五")]),s("el-checkbox-button",{attrs:{label:"7"}},[e._v("星期六")]),s("el-checkbox-button",{attrs:{label:"1"}},[e._v("星期日")])],1)],1),s("el-form-item",{attrs:{label:"运营时间"}},[s("el-time-picker",{attrs:{"end-placeholder":"关门时间","is-range":"",placeholder:"选择运营时间范围","range-separator":"至","start-placeholder":"开门时间"},model:{value:e.timePickValue,callback:function(t){e.timePickValue=t},expression:"timePickValue"}})],1),s("el-form-item",{attrs:{label:"店铺地址"}},[s("el-select",{staticStyle:{display:"block"},attrs:{loading:e.searchLoading,"remote-method":e.onSearch,filterable:"",placeholder:"请输入关键词",remote:"","reserve-keyword":""},on:{change:e.onSelect},model:{value:e.storeSetting.store_address,callback:function(t){e.$set(e.storeSetting,"store_address",t)},expression:"storeSetting.store_address"}},e._l(e.addressList,(function(e){return s("el-option",{key:e.address,attrs:{label:e.address,value:e.address}})})),1)],1),s("el-form-item",{attrs:{label:"地址经度"}},[s("el-input",{attrs:{disabled:""},model:{value:e.storeSetting.store_address_x,callback:function(t){e.$set(e.storeSetting,"store_address_x",t)},expression:"storeSetting.store_address_x"}})],1),s("el-form-item",{attrs:{label:"地址纬度"}},[s("el-input",{attrs:{disabled:""},model:{value:e.storeSetting.store_address_y,callback:function(t){e.$set(e.storeSetting,"store_address_y",t)},expression:"storeSetting.store_address_y"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("STORE")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"配送设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.expressSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"最低起送价格"}},[s("el-tooltip",{attrs:{content:"最低起送价格",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.lowest_order_price,callback:function(t){e.$set(e.expressSetting,"lowest_order_price",e._n(t))},expression:"expressSetting.lowest_order_price"}})],1)],1),s("el-form-item",{attrs:{label:"最远配送距离"}},[s("el-tooltip",{attrs:{content:"最远配送距离，单位为米",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.max_express_distance,callback:function(t){e.$set(e.expressSetting,"max_express_distance",e._n(t))},expression:"expressSetting.max_express_distance"}})],1)],1),s("el-form-item",{attrs:{label:"配送费"}},[s("el-tooltip",{attrs:{content:"每单收取的配送费",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.delivery_price,callback:function(t){e.$set(e.expressSetting,"delivery_price",e._n(t))},expression:"expressSetting.delivery_price"}})],1)],1),s("el-form-item",{attrs:{label:"起送价范围设置"}},[s("el-tooltip",{attrs:{content:"距离不同,起送价格不同",placement:"right"}},[s("dynamic-input",{model:{value:e.expressSetting.distance_price_arr,callback:function(t){e.$set(e.expressSetting,"distance_price_arr",t)},expression:"expressSetting.distance_price_arr"}})],1)],1),s("el-form-item",{attrs:{label:"基本配送时间"}},[s("el-tooltip",{attrs:{content:"只有一单的情况下,配送需要多长时间",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.base_express_time,callback:function(t){e.$set(e.expressSetting,"base_express_time",e._n(t))},expression:"expressSetting.base_express_time"}})],1)],1),s("el-form-item",{attrs:{label:"配送平均时间"}},[s("el-tooltip",{attrs:{content:"一般情况下，平均每单的配送时间",placement:"right"}},[s("el-input",{model:{value:e.expressSetting.average_express_time,callback:function(t){e.$set(e.expressSetting,"average_express_time",e._n(t))},expression:"expressSetting.average_express_time"}})],1)],1),s("el-form-item",{attrs:{label:"外卖人员"}},[s("el-input",{model:{value:e.expressSetting.deliverier_count,callback:function(t){e.$set(e.expressSetting,"deliverier_count",e._n(t))},expression:"expressSetting.deliverier_count"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("EXPRESS")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"支付设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.paymentSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"通帐银行"}},[s("el-tooltip",{attrs:{content:"商家的收款通帐",placement:"right"}},[s("el-select",{attrs:{placeholder:"请选择银行"},model:{value:e.paymentSetting.bank,callback:function(t){e.$set(e.paymentSetting,"bank",t)},expression:"paymentSetting.bank"}},[s("el-option",{attrs:{value:"농협"}},[e._v("농협")]),s("el-option",{attrs:{value:"SC제일은행"}},[e._v("SC제일은행")]),s("el-option",{attrs:{value:"국민은행"}},[e._v("국민은행")]),s("el-option",{attrs:{value:"신한은행"}},[e._v("신한은행")]),s("el-option",{attrs:{value:"우리은행"}},[e._v("우리은행")]),s("el-option",{attrs:{value:"기업은행"}},[e._v("기업은행")]),s("el-option",{attrs:{value:"하나은행"}},[e._v("하나은행")]),s("el-option",{attrs:{value:"하나외환은행"}},[e._v("하나외환은행")]),s("el-option",{attrs:{value:"우체국"}},[e._v("우체국")]),s("el-option",{attrs:{value:"대구은행"}},[e._v("대구은행")]),s("el-option",{attrs:{value:"부산은행"}},[e._v("부산은행")]),s("el-option",{attrs:{value:"광주은행"}},[e._v("광주은행")]),s("el-option",{attrs:{value:"전북은행"}},[e._v("전북은행")]),s("el-option",{attrs:{value:"제주은행"}},[e._v("제주은행")]),s("el-option",{attrs:{value:"경남은행"}},[e._v("경남은행")]),s("el-option",{attrs:{value:"새마을금고"}},[e._v("새마을금고")]),s("el-option",{attrs:{value:"한국시티은행"}},[e._v("한국시티은행")]),s("el-option",{attrs:{value:"수협"}},[e._v("수협")]),s("el-option",{attrs:{value:"신협"}},[e._v("신협")]),s("el-option",{attrs:{value:"NH농협증권"}},[e._v("NH농협증권")]),s("el-option",{attrs:{value:"대우증권"}},[e._v("대우증권")]),s("el-option",{attrs:{value:"상호저축은행"}},[e._v("상호저축은행")]),s("el-option",{attrs:{value:"유안타증권(구 동양)"}},[e._v("유안타증권(구 동양)")]),s("el-option",{attrs:{value:"케이뱅크"}},[e._v("케이뱅크")]),s("el-option",{attrs:{value:"카카오뱅크"}},[e._v("카카오뱅크")]),s("el-option",{attrs:{value:"삼성증권"}},[e._v("삼성증권")])],1)],1)],1),s("el-form-item",{attrs:{label:"通帐账号"}},[s("el-input",{model:{value:e.paymentSetting.account,callback:function(t){e.$set(e.paymentSetting,"account",t)},expression:"paymentSetting.account"}})],1),s("el-form-item",{attrs:{label:"账号户名"}},[s("el-input",{model:{value:e.paymentSetting.accountName,callback:function(t){e.$set(e.paymentSetting,"accountName",t)},expression:"paymentSetting.accountName"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("PAYMENT")}}},[e._v("保存设置")])],1)],1)],1),s("el-tab-pane",{attrs:{label:"打印设置"}},[s("el-form",{ref:"form",staticStyle:{"max-width":"660px"},attrs:{model:e.printerSetting,"label-width":"120px",size:"mini"}},[s("el-form-item",{attrs:{label:"设备号"}},[s("el-input",{model:{value:e.printerSetting.sn,callback:function(t){e.$set(e.printerSetting,"sn",t)},expression:"printerSetting.sn"}})],1),s("el-form-item",{attrs:{label:"语音类型"}},[s("el-select",{attrs:{placeholder:"请选择语言类型"},model:{value:e.printerSetting.voiceType,callback:function(t){e.$set(e.printerSetting,"voiceType",e._n(t))},expression:"printerSetting.voiceType"}},[s("el-option",{attrs:{value:"0",label:"真人语音 (大)"}}),s("el-option",{attrs:{value:"1",label:"真人语音 (中)"}}),s("el-option",{attrs:{value:"2",label:"真人语音 (小)"}}),s("el-option",{attrs:{value:"3",label:"嘀嘀声"}}),s("el-option",{attrs:{value:"4",label:"静音"}})],1)],1),s("el-form-item",{attrs:{label:"厨师体温"}},[s("el-input",{model:{value:e.printerSetting.temperature1,callback:function(t){e.$set(e.printerSetting,"temperature1",t)},expression:"printerSetting.temperature1"}})],1),s("el-form-item",{attrs:{label:"外卖员体温"}},[s("el-input",{model:{value:e.printerSetting.temperature2,callback:function(t){e.$set(e.printerSetting,"temperature2",t)},expression:"printerSetting.temperature2"}})],1),s("el-form-item",{attrs:{label:"老板体温"}},[s("el-input",{model:{value:e.printerSetting.temperature3,callback:function(t){e.$set(e.printerSetting,"temperature3",t)},expression:"printerSetting.temperature3"}})],1),s("el-form-item",{attrs:{label:"打包员体温"}},[s("el-input",{model:{value:e.printerSetting.temperature4,callback:function(t){e.$set(e.printerSetting,"temperature4",t)},expression:"printerSetting.temperature4"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveSetting("PRINTER")}}},[e._v("保存设置")])],1)],1)],1)],1)],1)],1)},a=[],r=(s("7db0"),s("4160"),s("a15b"),s("d3b7"),s("ac1f"),s("1276"),s("159b"),s("a145")),i=s("178e"),o=s("2f94"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"tag-view"},[e._l(e.distancePriceArr,(function(t){return s("el-tag",{key:t.key,attrs:{"disable-transitions":!1,closable:""},on:{close:function(s){return e.handleClose(t)}}},[e._v(" "+e._s(t.key)+"米以上, 起送价: ₩ "+e._s(t.value)+" ")])})),e.inputVisible?e._e():s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加")])],2),e.inputVisible?s("div",{staticClass:"dynamic-input"},[s("div",{staticClass:"add-operation"},[s("el-input",{staticClass:"input-with-select",staticStyle:{width:"120px","margin-right":"8px"},attrs:{placeholder:"请输入距离下限"},model:{value:e.key,callback:function(t){e.key=e._n(t)},expression:"key"}}),e._v(" : "),s("el-input",{staticClass:"input-with-select",staticStyle:{width:"120px",margin:"0px 8px"},attrs:{placeholder:"请输入起送价格"},model:{value:e.value,callback:function(t){e.value=e._n(t)},expression:"value"}}),s("el-button",{attrs:{type:"success"},on:{click:e.handleInputConfirm}},[e._v("添加")])],1)]):e._e()])},c=[],p=(s("c975"),s("a434"),s("5c96")),u={name:"DynamicInput",model:{prop:"distancePriceArr",event:"change"},props:{distancePriceArr:{type:Array,required:!0}},data:function(){return{inputVisible:!1,key:null,value:null}},methods:{handleClose:function(e){this.distancePriceArr.splice(this.distancePriceArr.indexOf(e),1)},showInput:function(){this.inputVisible=!0},handleInputConfirm:function(){if(this.key&&this.value){this.distancePriceArr.forEach((function(e){}));for(var e=0;e<this.distancePriceArr.length;e++){var t=this.distancePriceArr[e];if(t.key===this.key)return void Object(p["Message"])({message:"存在相同距离的设置! 请确认!",type:"error",duration:3e3})}this.distancePriceArr.push({key:this.key,value:this.value})}this.inputVisible=!1,this.key="",this.value="",this.distancePriceArr.sort((function(e,t){return t.key-e.key})),this.$emit("change",this.distancePriceArr)}}},d=u,m=(s("ab85"),s("2877")),g=Object(m["a"])(d,l,c,!1,null,"687818af",null),_=g.exports,f=s("5f87"),v={name:"SysManagement",components:{BaseCard:r["a"],DynamicInput:_},computed:{authHeader:function(){return{Authorization:"Bearer ".concat(Object(f["b"])())}}},created:function(){this.init(0)},data:function(){return{saveLoading:!1,timePickValue:[new Date,new Date],systemSetting:{service_running:!0,auto_receive_order:!1,service_close_notice:"",goods_page_notice:"",goods_page_tags:""},storeSetting:{store_logo:"",store_open_date:[],store_open_time:null,store_close_time:null,store_address:"",store_address_x:null,store_address_y:null},expressSetting:{lowest_order_price:0,delivery_price:0,distance_price_arr:[],base_express_time:0,average_express_time:0,deliverier_count:0,max_express_distance:0},paymentSetting:{bank:null,account:null,accountName:null},printerSetting:{sn:"",voiceType:"0",temperature1:"",temperature2:"",temperature3:"",temperature4:""},searchLoading:!1,addressList:[]}},methods:{init:function(){var e=this;i["a"].getSettingsByScope("SYSTEM").then((function(t){t.forEach((function(t){"service_running"!==t.key&&"auto_receive_order"!==t.key?e.$set(e.systemSetting,t.key,t.value):e.$set(e.systemSetting,t.key,"true"===t.value)}))})),i["a"].getSettingsByScope("STORE").then((function(t){t.forEach((function(t){"store_open_date"===t.key?e.$set(e.storeSetting,t.key,t.value.split(",")):("store_open_time"===t.key&&e.$set(e.timePickValue,0,new Date(t.value)),"store_close_time"===t.key&&e.$set(e.timePickValue,1,new Date(t.value)),e.$set(e.storeSetting,t.key,t.value))}))})),i["a"].getSettingsByScope("EXPRESS").then((function(t){t.forEach((function(t){"distance_price_arr"!==t.key?e.$set(e.expressSetting,t.key,t.value):e.$set(e.expressSetting,t.key,JSON.parse(t.value))}))})),i["a"].getSettingsByScope("PAYMENT").then((function(t){t.forEach((function(t){e.$set(e.paymentSetting,t.key,t.value)}))})),i["a"].getSettingsByScope("PRINTER").then((function(t){t.forEach((function(t){e.$set(e.printerSetting,t.key,t.value)}))}))},saveSetting:function(e){var t,s=this;switch(e){case"SYSTEM":t=Object.assign({},this.systemSetting);break;case"STORE":t=Object.assign({},this.storeSetting),t.store_open_date=t.store_open_date.join(),t.store_open_time=this.timePickValue[0],t.store_close_time=this.timePickValue[1];break;case"EXPRESS":t=Object.assign({},this.expressSetting),t.distance_price_arr=JSON.stringify(t.distance_price_arr);break;case"PAYMENT":t=Object.assign({},this.paymentSetting);break;case"PRINTER":if(""===this.printerSetting.sn)return void this.$message({message:"请填写设备号!",type:"warning"});t=Object.assign({},this.printerSetting);break}this.saveLoading=!0,i["a"].updateSetting(t,e).then((function(e){s.$message({message:e.message,type:"success"})})).finally((function(){s.saveLoading=!1}))},onSearch:function(e){var t=this;""!==e?(this.searchLoading=!0,o["a"].searchAddress(e).then((function(e){t.addressList=e})).catch((function(){t.addressList=[]})).finally((function(){t.searchLoading=!1}))):this.addressList=[]},onSelect:function(e){var t=this.addressList.find((function(t){return t.address===e}));this.storeSetting.store_address=t.address,this.storeSetting.store_address_x=t.x,this.storeSetting.store_address_y=t.y},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<5;return t||this.$message.error("只能上传图片"),s||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&s},handleUploadSuccess:function(e,t,s){var n="/upload/images/store/".concat(e.message);this.storeSetting.store_logo=n}}},b=v,S=(s("1a66"),Object(m["a"])(b,n,a,!1,null,"4ad78f8a",null));t["default"]=S.exports},b902:function(e,t,s){}}]);